{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const fetchPhotosByQuery = (searchQuery, currentPage) => {\n  const axiosParams = {\n    params: {\n      key: '48537996-74d498ea386a1fe50c0c053c2',\n      page: currentPage,\n      per_page: 15,\n      q: searchQuery,\n    },\n  };\n  return axios.get(\n    `https://pixabay.com/api/?image_type=photo&orientation=horizontal&safesearch=true`,\n    axiosParams\n  );\n};\n","export const createGalleryCardTemplate = imgInfo => {\n  return `<li class=\"gallery-card\">\n  <a href=\"${imgInfo.largeImageURL}\" class=\"gallery-item\">\n    <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" title=\"\" />\n    <div class=\"gallery-info\">\n    <p>\n    <span>Likes</span>\n    <span>${imgInfo.likes}</span>\n    </p>\n        <p>\n    <span>Views</span>\n    <span>${imgInfo.views}</span>\n    </p>\n        <p>\n    <span>Comments</span>\n    <span>${imgInfo.comments}</span>\n    </p>\n       <p>\n    <span>Downloads</span>\n    <span>${imgInfo.downloads}</span>\n    </p>\n    </div>\n    </a>\n  </li>`;\n};\n","import { fetchPhotosByQuery } from './js/pixabay-api';\nimport { createGalleryCardTemplate } from './js/render-functions';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtnEl = document.querySelector('.js-load-more-btn');\n\nlet page = 1;\nlet searchQuery = '';\n\nconst searchFromSubmit = async event => {\n  try {\n    event.preventDefault();\n\n    showLoader();\n\n    searchQuery = event.currentTarget.elements.user_query.value.trim();\n\n    if (searchQuery === '') {\n      hideLoader();\n\n      iziToast.error({\n        title: 'Error!',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n\n      return;\n    }\n\n    page = 1;\n\n    loadMoreBtnEl.classList.add('hidden');\n\n    const { data } = await fetchPhotosByQuery(searchQuery, page);\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: 'Error!',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n\n      galleryEl.innerHTML = '';\n\n      searchFormEl.reset();\n\n      SimpleLightbox.refresh();\n\n      return;\n    }\n\n    if (data.totalHits > 1) {\n      loadMoreBtnEl.classList.remove('hidden');\n\n      loadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);\n    }\n\n    const galleryTamplate = data.hits\n      .map(el => createGalleryCardTemplate(el))\n      .join('');\n\n    galleryEl.innerHTML = galleryTamplate;\n\n    new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n    // console.log(data);\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n};\n\nconst showLoader = () => loader.classList.remove('is-hidden');\n\nconst hideLoader = () => loader.classList.add('is-hidden');\n\nsearchFormEl.addEventListener('submit', searchFromSubmit);\n\nconst onLoadMoreBtnClick = async event => {\n  try {\n    page++;\n    const { data } = await fetchPhotosByQuery(searchQuery, page);\n\n    const galleryTamplate = data.hits\n      .map(el => createGalleryCardTemplate(el))\n      .join('');\n\n    galleryEl.insertAdjacentHTML('beforeend', galleryTamplate);\n\n    smoothScroll();\n\n    if (page * 15 >= data.totalHits) {\n      iziToast.error({\n        title: 'Error!',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      loadMoreBtnEl.classList.add('hidden');\n\n      loadMoreBtnEl.removeEventListener('click', onLoadMoreBtnClick);\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nconst smoothScroll = () => {\n  const { height: cardHeight } = galleryEl.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n};\nconsole.log(smoothScroll);\n"],"names":["fetchPhotosByQuery","searchQuery","currentPage","axiosParams","axios","createGalleryCardTemplate","imgInfo","searchFormEl","galleryEl","loader","loadMoreBtnEl","page","searchFromSubmit","event","showLoader","hideLoader","iziToast","data","SimpleLightbox","onLoadMoreBtnClick","galleryTamplate","el","error","smoothScroll","cardHeight"],"mappings":"owBAEO,MAAMA,EAAqB,CAACC,EAAaC,IAAgB,CAC9D,MAAMC,EAAc,CAClB,OAAQ,CACN,IAAK,qCACL,KAAMD,EACN,SAAU,GACV,EAAGD,CACJ,CACL,EACE,OAAOG,EAAM,IACX,mFACAD,CACJ,CACA,ECfaE,EAA4BC,GAChC;AAAA,aACIA,EAAQ,aAAa;AAAA,oCACEA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA;AAAA,YAIlEA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,YAIbA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,YAIbA,EAAQ,QAAQ;AAAA;AAAA;AAAA;AAAA,YAIhBA,EAAQ,SAAS;AAAA;AAAA;AAAA;AAAA,SCTvBC,EAAe,SAAS,cAAc,iBAAiB,EACvDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAgB,SAAS,cAAc,mBAAmB,EAEhE,IAAIC,EAAO,EACPV,EAAc,GAElB,MAAMW,EAAmB,MAAMC,GAAS,CACtC,GAAI,CAOF,GANAA,EAAM,eAAc,EAEpBC,IAEAb,EAAcY,EAAM,cAAc,SAAS,WAAW,MAAM,OAExDZ,IAAgB,GAAI,CACtBc,IAEAC,EAAS,MAAM,CACb,MAAO,SACP,QACE,0EACV,CAAO,EAED,MACD,CAEDL,EAAO,EAEPD,EAAc,UAAU,IAAI,QAAQ,EAEpC,KAAM,CAAE,KAAAO,CAAI,EAAK,MAAMjB,EAAmBC,EAAaU,CAAI,EAE3D,GAAIM,EAAK,KAAK,SAAW,EAAG,CAC1BD,EAAS,MAAM,CACb,MAAO,SACP,QACE,0EACV,CAAO,EAEDR,EAAU,UAAY,GAEtBD,EAAa,MAAK,EAElBW,EAAe,QAAO,EAEtB,MACD,CAEGD,EAAK,UAAY,IACnBP,EAAc,UAAU,OAAO,QAAQ,EAEvCA,EAAc,iBAAiB,QAASS,CAAkB,GAG5D,MAAMC,EAAkBH,EAAK,KAC1B,IAAII,GAAMhB,EAA0BgB,CAAE,CAAC,EACvC,KAAK,EAAE,EAEVb,EAAU,UAAYY,EAEtB,IAAIF,EAAe,aAAc,CAC/B,aAAc,MACd,aAAc,GACpB,CAAK,CAEF,OAAQI,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRP,GACD,CACH,EAEMD,EAAa,IAAML,EAAO,UAAU,OAAO,WAAW,EAEtDM,EAAa,IAAMN,EAAO,UAAU,IAAI,WAAW,EAEzDF,EAAa,iBAAiB,SAAUK,CAAgB,EAExD,MAAMO,EAAqB,MAAMN,GAAS,CACxC,GAAI,CACFF,IACA,KAAM,CAAE,KAAAM,CAAI,EAAK,MAAMjB,EAAmBC,EAAaU,CAAI,EAErDS,EAAkBH,EAAK,KAC1B,IAAII,GAAMhB,EAA0BgB,CAAE,CAAC,EACvC,KAAK,EAAE,EAEVb,EAAU,mBAAmB,YAAaY,CAAe,EAEzDG,IAEIZ,EAAO,IAAMM,EAAK,YACpBD,EAAS,MAAM,CACb,MAAO,SACP,QAAS,4DACjB,CAAO,EACDN,EAAc,UAAU,IAAI,QAAQ,EAEpCA,EAAc,oBAAoB,QAASS,CAAkB,EAEhE,OAAQG,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,EAEMC,EAAe,IAAM,CACzB,KAAM,CAAE,OAAQC,CAAY,EAAGhB,EAAU,sBAAqB,EAC9D,OAAO,SAAS,CACd,IAAKgB,EAAa,EAClB,SAAU,QACd,CAAG,CACH,EACA,QAAQ,IAAID,CAAY"}